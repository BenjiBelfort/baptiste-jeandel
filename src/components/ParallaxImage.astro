---
const {
  src,
  alt = "",
  height = "60vh",
  overlay = "bg-black/20",
  fallbackSrc = src,
  parallaxFrom = "lg",
  mobileFit = "cover",
} = Astro.props;

const showParallax = parallaxFrom === "lg" ? "hidden lg:block"
                  : parallaxFrom === "xl" ? "hidden xl:block"
                  : /* md */                "hidden md:block";

const showFallback = parallaxFrom === "lg" ? "block lg:hidden"
                  : parallaxFrom === "xl" ? "block xl:hidden"
                  :                          "block md:hidden";

const mobileFitClass = mobileFit === "contain"
  ? "bg-contain bg-no-repeat"
  : "bg-cover";
---

<div
  class={`${showFallback} relative w-full bg-center ${mobileFitClass}`}
  style={`background-image: url(${fallbackSrc}); height: ${height};`}
  role="img"
  aria-label={alt}
>
  <div class={`absolute inset-0 ${overlay}`}></div>
</div>

<div
  class={`${showParallax} relative w-full bg-fixed bg-center bg-cover`}
  style={`background-image: url(${src}); height: ${height};`}
  role="img"
  aria-label={alt}
>
  <div class={`absolute inset-0 ${overlay}`}></div>
</div>
