---
import FunkyButton from '@/components/FunkyButton.astro';

type Props = {
  domain?: string;
  origin?: string;     // ex: "formations/handpan"
  color?: string;      // "bg-sky-300", etc.
  label?: string;      // libellé du bouton
  message?: string;    // ✅ texte depuis le frontmatter
};

const {
  domain = '',
  origin = '',
  color,
  label = 'Demander un devis',
  message,
} = Astro.props;

// URL contact (avec paramètres)
const contactHref = `/contact?domain=${encodeURIComponent(domain)}&origin=${encodeURIComponent(origin)}`;

// Fallback si pas de message fourni
const finalMessage = message ?? "Besoin d’un devis ? Je vous réponds rapidement";
---

<section
  aria-label="Demander un devis"
  class="sticky bottom-6 mb-6 z-40 flex justify-center"
>
  <div
    class="bg-white/80 backdrop-blur border border-stone-900 shadow-sm/30
           px-6 py-4 max-w-4xl w-full flex flex-col md:flex-row items-center justify-between gap-4
           rounded-none"
  >
    <p class="hidden md:block text-stone-900 font-medium">
      {finalMessage}
        <span
            aria-hidden="true"
            class="inline-block ml-1 motion-safe:animate-[wiggle_1.6s_ease-in-out_infinite]"
        >
            →
        </span>
    </p>

    <div class="flex-shrink-0">
      <FunkyButton
        href={contactHref}
        label={label}
        color="bg-slate-300"
      />
    </div>
  </div>
</section>
